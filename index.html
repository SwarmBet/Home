<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SwarmBet - Star Premium 2026</title>
    <style>
        :root { 
            --orange: #ff9900; 
            --dark: #0a0a0a; 
            --panel: #151515; 
            --green: #27ae60; 
            --red: #e74c3c; 
            --black: #2c3e50; 
            --gold: #f1c40f;
            --sidebar: #111111;
        }
        body { 
            background-color: var(--dark); 
            color: white; 
            font-family: 'Inter', 'Segoe UI', sans-serif; 
            margin: 0; 
            display: flex; 
            height: 100vh; 
            overflow: hidden;
            background-image: radial-gradient(circle at center, rgba(255, 153, 0, 0.03) 0%, transparent 80%);
        }

        /* Sidebar & Layout */
        .sidebar { width: 240px; background: var(--sidebar); border-right: 1px solid #222; display: flex; flex-direction: column; padding: 20px 0; flex-shrink: 0; }
        .logo { padding: 0 25px 30px; font-size: 24px; font-weight: 900; color: white; text-decoration: none; }
        .logo span { color: var(--orange); }

        .nav-item { padding: 12px 25px; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 12px; transition: 0.2s; color: #888; }
        .nav-item:hover, .nav-item.active { background: rgba(255, 153, 0, 0.1); color: var(--orange); border-left: 3px solid var(--orange); }

        .main-wrapper { flex: 1; display: flex; flex-direction: column; overflow-y: auto; }
        .top-nav { height: 70px; background: #000; border-bottom: 2px solid var(--orange); display: flex; align-items: center; justify-content: flex-end; padding: 0 40px; gap: 20px; position: sticky; top: 0; z-index: 100; }

        .balance-box { background: #1a1a1a; padding: 8px 18px; border-radius: 8px; color: white; font-weight: bold; display: flex; align-items: center; gap: 10px; border: 1px solid #333; }
        .container { padding: 40px; max-width: 1100px; margin: 0 auto; width: 100%; box-sizing: border-box; }
        .card { background: var(--panel); border: 1px solid #222; border-radius: 15px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }

        .hidden { display: none !important; }
        .btn-play { background: var(--orange); color: black; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 900; cursor: pointer; }
        .btn-back { background: #333; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-bottom: 20px; font-weight: bold; }
        input, select { background: #000; border: 1px solid #333; color: var(--orange); padding: 10px; border-radius: 8px; text-align: center; outline: none; }

        /* Grid */
        .games-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
        .game-card { background: #111; border-radius: 12px; padding: 20px 10px; text-align: center; transition: 0.3s; cursor: pointer; border: 1px solid #222; }
        .game-card:hover { transform: translateY(-5px); background: #181818; border-color: var(--orange); }
        .icon-box { width: 50px; height: 50px; background: rgba(0,0,0,0.3); border-radius: 10px; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 24px; }

        /* OPRAVA ROULETTE CSS */
        .btn-extra { 
            position: relative; 
            background: #222; 
            border: 1px solid #444; 
            color: white; 
            padding: 10px; 
            cursor: pointer; 
            font-weight: bold; 
            border-radius: 4px; 
            overflow: visible; 
        }
        .chip-overlay { 
            position: absolute; 
            width: 22px; 
            height: 22px; 
            background: var(--orange); 
            border-radius: 50%; 
            border: 2px dashed white; 
            color: black; 
            font-size: 9px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: bold; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            z-index: 10; 
            pointer-events: none;
        }
        
        /* Ostatn√≠ hern√≠ CSS z≈Øst√°v√° nezmƒõnƒõno */
        .m-grid { display: grid; grid-template-columns: repeat(5, 60px); gap: 10px; justify-content: center; margin-top: 20px; }
        .tile { width: 60px; height: 60px; background: #000; border: 1px solid #333; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 28px; }
        .r-slider-wrap { position: relative; width: 100%; height: 80px; background: #111; border: 2px solid #333; overflow: hidden; border-radius: 10px; margin-bottom: 20px; }
        .r-slider-inner { display: flex; position: absolute; left: 0; align-items: center; height: 100%; will-change: transform; }
        .r-num { min-width: 80px; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; font-weight: bold; border-right: 1px solid rgba(0,0,0,0.5); font-size: 24px; }
        .r-grid { display: grid; grid-template-columns: 80px repeat(12, 1fr); gap: 5px; }
        .cell { position: relative; height: 50px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-weight: bold; border-radius: 4px; border: 2px solid transparent; }
        .cell.nula { background: var(--green); grid-row: span 3; height: 160px; font-size: 24px; }
        .cell.red { background: var(--red); }
        .cell.black { background: var(--black); }
        .bj-area { display: flex; flex-direction: column; align-items: center; gap: 20px; padding: 20px; }
        .bj-hand { display: flex; gap: 10px; min-height: 120px; align-items: center; }
        .card-ui { width: 70px; height: 100px; background: white; border-radius: 8px; color: black; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 20px; }
    </style>
</head>
<body onclick="initAudio()">

<div id="auth-screen">
    <div class="card" style="width: 320px; margin: 100px auto; text-align: center; border: 2px solid var(--orange);">
        <h1 style="color:var(--orange);">SWARMBET</h1>
        <input type="text" id="user" placeholder="Username"><br><br>
        <input type="password" id="pass" placeholder="Password"><br><br>
        <button class="btn-play" onclick="auth('login')" style="width:100%;">LOGIN</button>
    </div>
</div>

<div id="main-app" class="hidden" style="display: flex; width: 100%;">
    <div class="sidebar">
        <div class="logo">S<span>B</span></div>
        <div class="nav-item active" onclick="showPage('games')">üéÆ Games</div>
        <div class="nav-item" onclick="showPage('history')">üìú History</div>
        <div class="nav-item" onclick="logout()">üö™ Logout</div>
    </div>

    <div class="main-wrapper">
        <div class="top-nav">
            <div class="balance-box"><span id="display-chips">0</span> ‚≠êÔ∏è</div>
            <div id="display-name">---</div>
        </div>

        <div class="container">
            <div id="page-games">
                <div id="selection-menu" class="games-grid">
                    <div class="game-card" onclick="selectGame('mines')"><div class="icon-box">üí£</div><h3>Mines</h3></div>
                    <div class="game-card" onclick="selectGame('dice')"><div class="icon-box">üé≤</div><h3>Dice</h3></div>
                    <div class="game-card" onclick="selectGame('coinflip')"><div class="icon-box">ü™ô</div><h3>Coin Flip</h3></div>
                    <div class="game-card" onclick="selectGame('roulette')"><div class="icon-box">üîò</div><h3>Roulette</h3></div>
                    <div class="game-card" onclick="selectGame('blackjack')"><div class="icon-box">üÉè</div><h3>Blackjack</h3></div>
                    <div class="game-card" onclick="selectGame('baccarat')"><div class="icon-box">üßß</div><h3>Baccarat</h3></div>
                    <div class="game-card" onclick="selectGame('crash')"><div class="icon-box">üöÄ</div><h3>Crash</h3></div>
                    <div class="game-card" onclick="selectGame('limbo')"><div class="icon-box">üõ∏</div><h3>Limbo</h3></div>
                    <div class="game-card" onclick="selectGame('tower')"><div class="icon-box">üè∞</div><h3>Tower</h3></div>
                    <div class="game-card" onclick="selectGame('plinko')"><div class="icon-box">üéæ</div><h3>Plinko</h3></div>
                </div>

                <div id="game-active-page" class="hidden">
                    <button class="btn-back" onclick="backToMenu()">‚Üê BACK</button>
                    <div id="game-container-inner" class="card">
                        <div id="game-roulette" class="hidden">
                            <h2 style="color:#1abc9c; text-align:center;">ROULETTE</h2>
                            <div id="r-status" style="text-align:center; color:var(--orange);">PLACE YOUR BETS</div>
                            <div class="r-slider-wrap"><div id="r-slider" class="r-slider-inner"></div></div>
                            <div class="r-grid" id="r-board"></div>
                            
                            <div class="r-extra-bets" style="display:grid; grid-template-columns: repeat(3, 1fr); gap:5px; margin-top:20px;">
                                <button class="btn-extra" onclick="setExtraBet('red', this)" style="background:var(--red);">RED</button>
                                <button class="btn-extra" onclick="setExtraBet('black', this)" style="background:var(--black);">BLACK</button>
                                <button class="btn-extra" onclick="setExtraBet('even', this)">EVEN</button>
                            </div>

                            <div style="text-align:center; margin-top:20px;">
                                Bet: <input type="number" id="r-bet" value="50">
                                <button class="btn-play" onclick="spinRoulette()">SPIN</button>
                                <button class="btn-play" style="background:#444;" onclick="clearRouletteBets()">CLEAR</button>
                            </div>
                        </div>
                        </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const DB_URL = "https://casbss-c75a0-default-rtdb.europe-west1.firebasedatabase.app/users";
    let currentUser = localStorage.getItem('swarm_user');
    let userData = { chips: 0 };
    let rBets = {};

    // --- LOGIKA OPRAVY TOKEN≈Æ ---
    function setExtraBet(type, el) {
        let amt = parseInt(document.getElementById('r-bet').value); 
        if(amt > userData.chips || amt <= 0) return;
        
        userData.chips -= amt; 
        rBets[type] = (rBets[type]||0) + amt;
        
        // Vytvo≈ôen√≠ ≈æetonu uvnit≈ô tlaƒç√≠tka
        let chip = el.querySelector('.chip-overlay'); 
        if(!chip) { 
            chip = document.createElement('div'); 
            chip.className = 'chip-overlay'; 
            el.appendChild(chip); 
        } 
        
        chip.innerText = rBets[type]; 
        updateUI();
    }

    function setRouletteBet(num, el) {
        let amt = parseInt(document.getElementById('r-bet').value);
        if(amt > userData.chips || amt <= 0) return;
        userData.chips -= amt;
        rBets[num] = (rBets[num]||0) + amt;
        let chip = el.querySelector('.chip-overlay');
        if(!chip) {
            chip = document.createElement('div');
            chip.className = 'chip-overlay';
            el.appendChild(chip);
        }
        chip.innerText = rBets[num];
        updateUI();
    }

    // --- ZBYTEK JAVASCRIPTU PRO V≈†ECH 10 HER ---
    // (Ponechej sv√© p≈Øvodn√≠ funkce pro Mines, Crash, Blackjack atd.)
    
    function updateUI() {
        document.getElementById('display-chips').innerText = Math.floor(userData.chips);
        // Odes√≠l√°n√≠ do Firebase...
    }

    function backToMenu() {
        document.getElementById('selection-menu').classList.remove('hidden');
        document.getElementById('game-active-page').classList.add('hidden');
    }

    function selectGame(g) {
        document.getElementById('selection-menu').classList.add('hidden');
        document.getElementById('game-active-page').classList.remove('hidden');
        document.querySelectorAll('#game-container-inner > div').forEach(d => d.classList.add('hidden'));
        document.getElementById('game-'+g)?.classList.remove('hidden');
    }
    
    // ... tv√© dal≈°√≠ hern√≠ funkce (startMines, startCrash, startTower...)
</script>
</body>
</html>
